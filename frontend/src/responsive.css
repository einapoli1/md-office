/* ══════════════════════════════════════════════════════════════════════════
   MD Office — Mobile Responsive Styles
   Breakpoint: 768px (mobile), 1024px (tablet)
   ══════════════════════════════════════════════════════════════════════════ */

/* ── Touch targets: ensure all interactive elements are at least 44px ── */
@media (max-width: 768px) {

  /* ── Global touch targets ─────────────────────────────────────────── */
  .toolbar-btn,
  .sheet-tb-btn,
  .slide-toolbar button,
  .comment-actions button,
  .suggestion-accept-btn,
  .suggestion-reject-btn,
  .suggestion-bulk-btn,
  .comments-close-btn,
  .suggestions-close-btn,
  .vh-close-btn,
  .thumb-add-btn,
  .filter-tab,
  .app-switcher-btn,
  .recent-docs-action-btn,
  .recent-docs-filter-btn {
    min-width: 44px;
    min-height: 44px;
  }

  /* ── Hamburger menu ───────────────────────────────────────────────── */
  .hamburger-btn {
    display: flex !important;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    border-radius: 8px;
    flex-shrink: 0;
  }
  .hamburger-btn:hover {
    background: var(--tertiary-bg);
  }

  .menu-items {
    display: none !important;
  }

  .menu-items.mobile-menu-open {
    display: flex !important;
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--primary-bg);
    flex-direction: column;
    z-index: 300;
    padding: 8px 0;
    box-shadow: var(--shadow-4);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .menu-items.mobile-menu-open .menu-item {
    width: 100%;
  }

  .menu-items.mobile-menu-open .menu-button {
    width: 100%;
    text-align: left;
    padding: 12px 16px;
    min-height: 44px;
    font-size: 15px;
  }

  .menu-items.mobile-menu-open .menu-dropdown {
    position: static;
    box-shadow: none;
    border: none;
    border-radius: 0;
    padding-left: 16px;
    background: var(--secondary-bg);
  }

  .menu-items.mobile-menu-open .menu-dropdown-item {
    min-height: 44px;
    padding: 10px 16px;
  }

  .mobile-menu-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 299;
  }

  /* ── MenuBar compaction ────────────────────────────────────────────── */
  .menu-bar {
    gap: 4px;
    padding: 4px 8px;
    height: 48px;
  }

  .app-title span {
    display: none; /* Hide "MD Docs" text, keep icon */
  }

  .mode-indicator {
    display: none;
  }

  .menu-bar-center {
    display: none;
  }

  .menu-bar-right .quick-action-btn {
    display: none;
  }

  .share-btn {
    min-width: 44px;
    min-height: 44px;
    padding: 0 10px;
  }
  .share-btn span {
    display: none;
  }

  /* ── DocsToolbar: horizontal scroll with touch ─────────────────────── */
  .docs-toolbar {
    overflow-x: auto;
    flex-wrap: nowrap !important;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding: 4px 8px;
    gap: 1px;
    top: 48px; /* adjusted for smaller menu bar */
  }
  .docs-toolbar::-webkit-scrollbar {
    display: none;
  }

  /* Hide less-essential toolbar items on mobile */
  .docs-toolbar .toolbar-dropdown-btn[style*="min-width: 100px"] {
    /* Font family dropdown - collapse */
    min-width: 60px !important;
    font-size: 12px;
  }

  .docs-toolbar .paragraph-style-btn {
    min-width: 70px !important;
    font-size: 12px;
  }

  .toolbar-divider {
    margin: 0 2px;
    height: 20px;
  }

  /* ── Editor: pageless-like full-width on mobile ────────────────────── */
  .document-editor {
    padding: 4px 0 !important;
    background: var(--primary-bg);
  }

  .document-page {
    max-width: 100% !important;
    margin: 0 !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    border: none !important;
    min-height: auto !important;
  }

  .document-title-area {
    padding: 16px 16px 8px !important;
  }

  .editor-content-area {
    padding: 8px 16px 24px !important;
  }

  /* Hide page chrome on mobile (simulate pageless) */
  .page-break-gap-wrapper,
  .page-break-gap,
  .page-number,
  .page-header-area {
    display: none !important;
  }

  .ruler-container {
    display: none !important;
  }

  /* ── Sidebars: full-screen overlays ────────────────────────────────── */
  .comments-sidebar,
  .suggestions-sidebar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    min-width: 100% !important;
    height: 100vh !important;
    z-index: 250 !important;
    border-left: none !important;
  }

  .vh-sidebar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    min-width: 100% !important;
    height: 100vh !important;
    z-index: 250 !important;
  }

  /* Sidebar close buttons should be clearly visible */
  .comments-close-btn,
  .suggestions-close-btn,
  .vh-close-btn {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* ── Recent Docs: single column ────────────────────────────────────── */
  .recent-docs-grid {
    grid-template-columns: 1fr !important;
  }

  .recent-docs-hero {
    padding: 24px 16px 20px !important;
  }

  .recent-docs-heading {
    font-size: 24px !important;
  }

  .recent-docs-actions {
    flex-wrap: wrap;
    gap: 8px;
  }

  .recent-docs-action-btn {
    flex: 1 1 calc(50% - 4px);
    min-width: 140px;
    padding: 12px 16px;
    font-size: 13px;
  }

  .recent-docs-toolbar {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .recent-docs-toolbar-left {
    flex-wrap: wrap;
  }

  .recent-docs-toolbar-right {
    width: 100%;
  }

  .recent-docs-search {
    flex: 1;
  }

  .recent-docs-search-input {
    width: 100% !important;
  }

  .recent-docs-filter-tabs {
    flex-wrap: wrap;
    gap: 4px;
  }

  .filter-tab {
    padding: 8px 12px;
  }

  /* ── Sheets: mobile optimizations ──────────────────────────────────── */
  .sheet-toolbar {
    overflow-x: auto;
    flex-wrap: nowrap !important;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding: 4px 6px;
    gap: 1px;
  }
  .sheet-toolbar::-webkit-scrollbar {
    display: none;
  }

  .sheet-toolbar button {
    min-width: 36px;
    min-height: 36px;
    padding: 0 4px;
  }

  .sheet-toolbar select,
  .sheet-tb-select {
    min-height: 36px;
    font-size: 12px;
    padding: 4px 6px;
  }

  .sheet-tb-sep {
    margin: 0 2px;
  }

  /* Smaller headers on mobile */
  .sheet-header-cell {
    font-size: 10px;
    min-width: 24px;
    height: 20px;
    padding: 0 2px;
  }

  .sheet-header-cell.row-header {
    width: 36px;
  }

  .sheet-cell {
    height: 28px; /* slightly taller for touch */
    min-width: 60px;
    font-size: 12px;
  }

  .sheet-formula-bar {
    height: 36px;
    padding: 0 6px;
  }

  .sheet-name-box {
    width: 60px;
    font-size: 11px;
  }

  .sheet-tabs-bar {
    height: 36px;
  }

  .sheet-tab {
    padding: 6px 12px;
    min-height: 36px;
  }

  .sheet-status-bar {
    height: 28px;
    font-size: 10px;
  }

  /* Sheet grid touch support */
  .sheet-grid {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-x pan-y;
  }

  .sheet-fill-handle {
    width: 12px;
    height: 12px;
    bottom: -6px;
    right: -6px;
  }

  /* ── Slides: mobile optimizations ──────────────────────────────────── */
  .slide-toolbar {
    overflow-x: auto;
    flex-wrap: nowrap !important;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding: 6px 8px;
    gap: 8px;
  }
  .slide-toolbar::-webkit-scrollbar {
    display: none;
  }

  .slide-toolbar select {
    min-height: 36px;
    font-size: 12px;
  }

  .slide-toolbar button {
    min-height: 36px;
    white-space: nowrap;
    font-size: 12px;
  }

  .toolbar-group {
    flex-shrink: 0;
  }

  /* Thumbnails as bottom strip */
  .slides-main {
    flex-direction: column-reverse !important;
  }

  .slide-thumbnails {
    flex-direction: row !important;
    width: 100% !important;
    min-width: 100% !important;
    max-height: 100px !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch;
    border-right: none !important;
    border-top: 1px solid #dadce0;
    padding: 6px;
    gap: 6px;
  }

  .slide-thumb {
    flex-shrink: 0;
  }

  .thumb-preview {
    width: 120px;
    height: 68px;
  }

  .thumb-number {
    font-size: 10px;
    min-width: 14px;
  }

  .slides-center {
    padding: 12px;
  }

  /* Scale down slide canvas on mobile */
  .slide-canvas {
    width: 100% !important;
    height: auto !important;
    aspect-ratio: 16 / 9;
    padding: 24px 32px;
  }

  .slide-notes-area {
    margin-top: 8px;
    padding: 8px 12px;
  }

  /* Slide comments panel as overlay on mobile */
  .slide-comments-panel {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    min-width: 100% !important;
    height: 100vh !important;
    z-index: 250 !important;
    border-left: none !important;
  }

  /* ── Status bar ────────────────────────────────────────────────────── */
  .status-bar {
    font-size: 11px;
    padding: 0 8px;
    height: 28px;
  }

  .status-bar .status-left > *:not(:first-child):not(:nth-child(2)) {
    display: none;
  }

  /* ── Find & Replace ────────────────────────────────────────────────── */
  .find-replace-bar {
    left: 0 !important;
    right: 0 !important;
    min-width: auto !important;
    border-radius: 0 !important;
    top: 0 !important;
  }

  /* ── Toast positioning ─────────────────────────────────────────────── */
  .toast-container {
    left: 8px !important;
    right: 8px !important;
    bottom: 40px !important;
  }

  .toast-item {
    min-width: auto !important;
    max-width: 100% !important;
  }

  /* ── Dialogs: full-width on mobile ─────────────────────────────────── */
  .dialog-overlay .dialog-content,
  .sheet-dialog,
  .about-dialog {
    width: 100% !important;
    max-width: 100vw !important;
    border-radius: 0 !important;
    margin: 0 !important;
  }
}

/* ── Hide hamburger on desktop ──────────────────────────────────────── */
@media (min-width: 769px) {
  .hamburger-btn {
    display: none !important;
  }

  .mobile-menu-backdrop {
    display: none !important;
  }
}

/* ── Tablet adjustments ─────────────────────────────────────────────── */
@media (min-width: 769px) and (max-width: 1024px) {
  .docs-toolbar {
    gap: 1px;
    padding: 6px 12px;
  }

  .toolbar-divider {
    margin: 0 4px;
  }

  .slide-toolbar {
    gap: 8px;
  }

  .recent-docs-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}
